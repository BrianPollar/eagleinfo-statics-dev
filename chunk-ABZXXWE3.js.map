{
  "version": 3,
  "sources": ["projects/admin-panel/src/app/components/pane/track/audit-log/audit-log.base.ts"],
  "sourcesContent": ["import { Directive, HostListener, Input, OnDestroy } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { AuditLog } from '@biz-nest/commerce-client';\nimport {\n  EventbusService,\n  IcustomCaller, ListComposeAdminPanel,\n  MainBarTitleService, WindowService\n} from '@front-shared-lib';\nimport { ToastrService } from 'ngx-toastr';\nimport { Subject } from 'rxjs';\n\n@Directive()\nexport class AuditLogBase\nimplements OnDestroy {\n  @Input() id?: string;\n  @Input()type?: 'parent' | 'user';\n  customCaller: IcustomCaller = {\n    method: 'filterAll',\n    extrasFilters: []\n  };\n\n  dest$ = new Subject();\n  cleanup?: () => void;\n\n  listCompose = new ListComposeAdminPanel<AuditLog>(\n    AuditLog,\n    this.eventbus,\n    this.windowService,\n    this.toastr,\n    this.customCaller\n  );\n\n  actions = [\n    {\n      label: 'View',\n      icon: 'edit',\n      event: (auditLog: AuditLog) => {\n        this.viewAuditLogDetails(auditLog._id);\n      }\n    },\n    {\n      label: 'Delete',\n      icon: 'delete',\n      event: (auditLog: AuditLog) => {\n        this.listCompose.openDeleteOneModal(\n          auditLog._id,\n          'Delete Audit Log',\n          'Are You Sure You Want To Delete This Audit Log?'\n        );\n      }\n    }\n  ];\n\n  constructor(\n    protected windowService: WindowService,\n    protected router: Router,\n    protected eventbus: EventbusService,\n    protected toastr: ToastrService,\n    protected route: ActivatedRoute,\n    protected mainBarTitle: MainBarTitleService\n  ) {\n    // if is from nav\n    if (!this.id) {\n      this.id = this.route.snapshot?.params['id'];\n    }\n\n    // if is from nav\n    if (!this.type) {\n      this.type = this.route.snapshot?.params['type'];\n    }\n  }\n\n  @HostListener('document:click', ['$event'])\n  onDocumentClick() {\n    this.listCompose.currentActivePopupId = '';\n  }\n\n  init() {\n    if (this.type === 'parent') {\n      this.customCaller = {\n        method: 'filterActivityOnParent',\n        extrasFilters: [this.id]\n      };\n    } else {\n      this.customCaller = {\n        method: 'filterActivityOnParent',\n        extrasFilters: [this.id]\n      };\n    }\n    this.mainBarTitle.title = 'Activity';\n    this.listCompose.getDataArr();\n  }\n\n  viewAuditLogDetails(_id: string) {\n    this.router.navigate(['/tracked-details/edited/' + _id]);\n  }\n\n  ngOnDestroy() {\n    this.cleanup?.();\n    this.listCompose.cleanup?.();\n  }\n}\n\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASA;AAGM,IAAO,eAAP,MAAO,cAAY;EAyCvB,YACY,eACA,QACA,UACA,QACA,OACA,cAAiC;AALjC,SAAA,gBAAA;AACA,SAAA,SAAA;AACA,SAAA,WAAA;AACA,SAAA,SAAA;AACA,SAAA,QAAA;AACA,SAAA,eAAA;AA3CZ,SAAA,eAA8B;MAC5B,QAAQ;MACR,eAAe,CAAA;;AAGjB,SAAA,QAAQ,IAAI,QAAO;AAGnB,SAAA,cAAc,IAAI,sBAChB,UACA,KAAK,UACL,KAAK,eACL,KAAK,QACL,KAAK,YAAY;AAGnB,SAAA,UAAU;MACR;QACE,OAAO;QACP,MAAM;QACN,OAAO,CAAC,aAAsB;AAC5B,eAAK,oBAAoB,SAAS,GAAG;QACvC;;MAEF;QACE,OAAO;QACP,MAAM;QACN,OAAO,CAAC,aAAsB;AAC5B,eAAK,YAAY,mBACf,SAAS,KACT,oBACA,iDAAiD;QAErD;;;AAaF,QAAI,CAAC,KAAK,IAAI;AACZ,WAAK,KAAK,KAAK,MAAM,UAAU,OAAO,IAAI;IAC5C;AAGA,QAAI,CAAC,KAAK,MAAM;AACd,WAAK,OAAO,KAAK,MAAM,UAAU,OAAO,MAAM;IAChD;EACF;EAGA,kBAAe;AACb,SAAK,YAAY,uBAAuB;EAC1C;EAEA,OAAI;AACF,QAAI,KAAK,SAAS,UAAU;AAC1B,WAAK,eAAe;QAClB,QAAQ;QACR,eAAe,CAAC,KAAK,EAAE;;IAE3B,OAAO;AACL,WAAK,eAAe;QAClB,QAAQ;QACR,eAAe,CAAC,KAAK,EAAE;;IAE3B;AACA,SAAK,aAAa,QAAQ;AAC1B,SAAK,YAAY,WAAU;EAC7B;EAEA,oBAAoB,KAAW;AAC7B,SAAK,OAAO,SAAS,CAAC,6BAA6B,GAAG,CAAC;EACzD;EAEA,cAAW;AACT,SAAK,UAAS;AACd,SAAK,YAAY,UAAS;EAC5B;;;uBAxFW,eAAY,4BAAA,aAAA,GAAA,4BAAA,MAAA,GAAA,4BAAA,eAAA,GAAA,4BAAA,aAAA,GAAA,4BAAA,cAAA,GAAA,4BAAA,mBAAA,CAAA;IAAA;EAAA;;yEAAZ,eAAY,cAAA,SAAA,0BAAA,IAAA,KAAA;AAAA,UAAA,KAAA,GAAA;AAAZ,QAAA,qBAAA,SAAA,SAAA,sCAAA,QAAA;AAAA,iBAAA,IAAA,gBAAA,MAAA;QACH,GAAA,OAAA,2BAAA;;;;;",
  "names": []
}
