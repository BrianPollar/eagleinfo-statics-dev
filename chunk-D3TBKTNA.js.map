{
  "version": 3,
  "sources": ["projects/shared-lib/src/lib/services/currency.service.ts"],
  "sourcesContent": ["import { isPlatformBrowser } from '@angular/common';\nimport { Inject, Injectable, PLATFORM_ID } from '@angular/core';\nimport { AuthClient } from '@biz-nest/auth-client';\nimport { CommerceClient } from '@biz-nest/commerce-client';\nimport { NotificationClient } from '@biz-nest/notification-client';\nimport { AppNameService, WebStorageService } from '@front-shared-lib';\nimport { ManagerClient } from '@main-shared-lib';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CurrencyService {\n  currency = 'USD';\n\n  constructor(\n    private storage: WebStorageService,\n    private apNme: AppNameService,\n    @Inject(PLATFORM_ID) private platformId: object\n  ) {}\n\n  setCurrency(currency: string) {\n    if (!currency) {\n      return;\n    }\n    this.currency = currency;\n    const headers = {\n      // eslint-disable-next-line @typescript-eslint/naming-convention\n      'x-currency': currency\n    };\n\n    AuthClient.ehttp.appendToHeaders(headers);\n    CommerceClient.ehttp.appendToHeaders(headers);\n    NotificationClient.ehttp.appendToHeaders(headers);\n    ManagerClient.ehttp.appendToHeaders(headers);\n  }\n\n  changeCurrency(newCurrency: string, forceReload = true) {\n    if (!newCurrency) {\n      return;\n    }\n    this.setCurrency(newCurrency);\n    this.storage.set(this.apNme + '_currency', newCurrency);\n    // Trigger a full app refresh without changing route\n    if (isPlatformBrowser(this.platformId) && forceReload) {\n      window.location.reload();\n    }\n  }\n\n  getStorageCurrency() {\n    return this.storage.get(this.apNme + '_currency');\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;AAWM,IAAO,kBAAP,MAAO,iBAAe;EAG1B,YACU,SACA,OACqB,YAAkB;AAFvC,SAAA,UAAA;AACA,SAAA,QAAA;AACqB,SAAA,aAAA;AAL/B,SAAA,WAAW;EAMR;EAEH,YAAY,UAAgB;AAC1B,QAAI,CAAC,UAAU;AACb;IACF;AACA,SAAK,WAAW;AAChB,UAAM,UAAU;;MAEd,cAAc;;AAGhB,eAAW,MAAM,gBAAgB,OAAO;AACxC,mBAAe,MAAM,gBAAgB,OAAO;AAC5C,uBAAmB,MAAM,gBAAgB,OAAO;AAChD,kBAAc,MAAM,gBAAgB,OAAO;EAC7C;EAEA,eAAe,aAAqB,cAAc,MAAI;AACpD,QAAI,CAAC,aAAa;AAChB;IACF;AACA,SAAK,YAAY,WAAW;AAC5B,SAAK,QAAQ,IAAI,KAAK,QAAQ,aAAa,WAAW;AAEtD,QAAI,kBAAkB,KAAK,UAAU,KAAK,aAAa;AACrD,aAAO,SAAS,OAAM;IACxB;EACF;EAEA,qBAAkB;AAChB,WAAO,KAAK,QAAQ,IAAI,KAAK,QAAQ,WAAW;EAClD;;;uBAvCW,kBAAe,mBAAA,iBAAA,GAAA,mBAAA,cAAA,GAAA,mBAMhB,WAAW,CAAA;IAAA;EAAA;;4EANV,kBAAe,SAAf,iBAAe,WAAA,YAFd,OAAM,CAAA;EAAA;;",
  "names": []
}
