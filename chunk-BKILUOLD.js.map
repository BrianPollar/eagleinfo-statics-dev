{
  "version": 3,
  "sources": ["projects/admin-panel/src/app/components/pane/subscriptions/subscription-list-sharable/subscription-list-sharable.component.ts", "projects/admin-panel/src/app/components/pane/subscriptions/subscription-list-sharable/subscription-list-sharable.component.html"],
  "sourcesContent": ["import { NgClass } from '@angular/common';\nimport { Component, HostListener, Input, OnDestroy, OnInit } from '@angular/core';\nimport { Router, RouterModule } from '@angular/router';\nimport { CompanySubscription } from '@biz-nest/commerce-client';\nimport {\n  EventbusService,\n  ListComposeAdminPanel, WindowService,\n  scrollToTop\n} from '@front-shared-lib';\nimport { navByBus, runSubscriptionsForSharedUse } from '@main-shared-lib';\nimport { ToastrService } from 'ngx-toastr';\nimport { AdminDateFilterFieldComponent } from '../../misc/admin-date-filter-field/admin-date-filter-field.component';\nimport { AdminModalComponent } from '../../misc/admin-modal/admin-modal.component';\nimport { AdminSearchFieldComponent } from '../../misc/admin-search-field/admin-search-field.component';\nimport { AdminTableComponent } from '../../misc/admin-table/admin-table.component';\n\n@Component({\n  selector: 'app-subscription-list-sharable',\n  standalone: true,\n  imports: [\n    RouterModule,\n    AdminModalComponent,\n    AdminTableComponent,\n    NgClass,\n    AdminSearchFieldComponent,\n    AdminDateFilterFieldComponent\n  ],\n  templateUrl: './subscription-list-sharable.component.html',\n  styleUrl: './subscription-list-sharable.component.scss'\n})\nexport class SubscriptionListSharableComponent\nimplements OnInit, OnDestroy {\n  @Input() companyId?: string;\n  cleanup?: () => void;\n  listCompose = new ListComposeAdminPanel<CompanySubscription>(\n    CompanySubscription,\n    this.eventbus,\n    this.windowService,\n    this.toastr\n  );\n\n  navigateByBus = navByBus(this.eventbus, this.router).navigateByBus;\n\n  actions = [\n    {\n      label: 'View',\n      icon: 'edit',\n      event: (companySub: CompanySubscription) => {\n        this.viewSubscription(companySub);\n      }\n    },\n    {\n      label: 'Delete',\n      icon: 'delete',\n      event: (companySub: CompanySubscription) => {\n        this.listCompose.openDeleteOneModal(\n          companySub._id,\n          'Delete Subscription',\n          'Are You Sure You Want To Delete This Subscription?'\n        );\n      }\n    }\n  ];\n\n  constructor(\n    private router: Router,\n    private eventbus: EventbusService,\n    private windowService: WindowService,\n    private toastr: ToastrService\n  ) { }\n\n  @HostListener('document:click', ['$event'])\n  onDocumentClick() {\n    this.listCompose.currentActivePopupId = '';\n  }\n\n  ngOnInit(): void {\n    this.listCompose.resetPagination();\n    if (this.companyId) {\n      this.listCompose.filterProps = {\n        propFilter: {\n          company: this.companyId\n        }\n      };\n    }\n    const { cleanup } = runSubscriptionsForSharedUse(this.eventbus, {\n      filterBy: (filter) => {\n        if (this.companyId) {\n          filter.propFilter = {\n            ...filter.propFilter,\n            company: this.companyId\n          };\n        }\n        this.listCompose.filterBy(filter.propFilter);\n      }\n    });\n\n    this.cleanup = cleanup;\n\n\n    this.listCompose.getDataArr();\n    scrollToTop(this.windowService);\n  }\n\n  viewSubscription(companySub: CompanySubscription) {\n    this.navigateByBus(['/subscription/package-detail'], 'oneCompanySubscription', companySub);\n  }\n\n  ngOnDestroy(): void {\n    this.listCompose.cleanup?.();\n  }\n}\n", "<div class=\"card !border !border-default-white-shade rounded-2xl\">\n  <div class=\"card-body\">\n    <div\n      class=\"grid grid-cols-12 relative justify-between h-[60px]\"\n      [ngClass]=\"{ 'h-[60px]': listCompose.selections.length }\"\n    >\n      <div class=\"col-span-12 md:col-span-4 w-[170px] mb-6\">\n        <app-admin-search-field\n          [options]=\"[\n            {\n              label: 'Name',\n              value: 'name'\n            },\n            {\n              label: 'Amount',\n              value: 'amount'\n            },\n            {\n              label: 'status',\n              value: 'status'\n            }\n          ]\"\n          (filter)=\"listCompose.searchBy($event)\"\n        />\n      </div>\n\n      @if(listCompose.selections.length === 0) {\n      <div class=\"col-span-12 md:col-span-4 w-[170px] xl:block hidden\">\n        <app-admin-date-filter-field\n          placeholder=\"Filter By Date Added\"\n          (filter)=\"listCompose.createdAtNotif($event)\"\n          (filterRange)=\"listCompose.createdAtNotifRange($event)\"\n        />\n      </div>\n      } @if(listCompose.selections.length > 0) {\n      <div class=\"absolute right-0 top-0\">\n        <button\n          class=\"mb-6 btn btn-soft-danger flex items-center justify-center\"\n          (click)=\"\n            listCompose.openDeleteManyModal(\n              'Delete Subscriptions',\n              'Are You Sure You Want To Delete Selected Subscriptions?'\n            )\n          \"\n        >\n          <i class=\"material-icons-outlined mr-2 text-red\">delete</i>\n          <span>Delete All</span>\n        </button>\n      </div>\n      }\n    </div>\n\n    <app-admin-table\n      [selectable]=\"true\"\n      [currentActivePopupId]=\"listCompose.currentActivePopupId\"\n      [dataArr]=\"listCompose.dataArr\"\n      [selections]=\"listCompose.selections\"\n      [limit]=\"listCompose.limit\"\n      [offset]=\"listCompose.offset\"\n      [count]=\"listCompose.count\"\n      [showingUpper]=\"listCompose.showingUpper\"\n      [showingLower]=\"listCompose.showingLower\"\n      [currentIndex]=\"listCompose.currentIndex\"\n      [loading]=\"listCompose.loading\"\n      [columns]=\"[\n        {\n          header: 'Name',\n          field: 'name',\n          isDefaultField: true,\n          sortable: true\n        },\n        {\n          header: 'Amount',\n          field: 'amount',\n          isMoneyValue: true,\n          sortable: true\n        },\n        {\n          header: 'Start Date',\n          field: 'startDate',\n          isDateValue: true,\n          sortable: true\n        },\n        {\n          header: 'End Date',\n          field: 'endDate',\n          isDateValue: true,\n          sortable: true\n        }\n      ]\"\n      [actions]=\"actions\"\n      (paginateItems)=\"listCompose.paginateItems($event)\"\n      (openExtras)=\"listCompose.openExtras($event)\"\n      (sortChange)=\"listCompose.sortBy($event.field, $event.direction)\"\n      (selectionToggle)=\"listCompose.toggleSelection($event)\"\n      (viewItem)=\"viewSubscription($event)\"\n    />\n  </div>\n</div>\n\n<app-admin-modal\n  [multipleDelete]=\"listCompose.multipleDelete\"\n  [showModal]=\"listCompose.showModal\"\n  [title]=\"listCompose.modalTitle\"\n  [message]=\"listCompose.modalMsg\"\n  [cancelButton]=\"listCompose.modalCancelButton\"\n  [cancelText]=\"listCompose.modalCancelText\"\n  [confirmText]=\"listCompose.modalConfirmText\"\n  [confirmButon]=\"listCompose.modalConfirmButton\"\n  (closed)=\"listCompose.toggleModal()\"\n/>\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC2BM,IAAA,yBAAA,GAAA,OAAA,CAAA,EAAiE,GAAA,+BAAA,CAAA;AAG7D,IAAA,qBAAA,UAAA,SAAA,uGAAA,QAAA;AAAA,MAAA,wBAAA,GAAA;AAAA,YAAA,SAAA,wBAAA;AAAA,aAAA,sBAAU,OAAA,YAAA,eAAA,MAAA,CAAkC;IAAA,CAAA,EAAC,eAAA,SAAA,4GAAA,QAAA;AAAA,MAAA,wBAAA,GAAA;AAAA,YAAA,SAAA,wBAAA;AAAA,aAAA,sBAC9B,OAAA,YAAA,oBAAA,MAAA,CAAuC;IAAA,CAAA;AAHxD,IAAA,uBAAA,EAIE;;;;;;AAGJ,IAAA,yBAAA,GAAA,OAAA,CAAA,EAAoC,GAAA,UAAA,EAAA;AAGhC,IAAA,qBAAA,SAAA,SAAA,mFAAA;AAAA,MAAA,wBAAA,GAAA;AAAA,YAAA,SAAA,wBAAA;AAAA,aAAA,sBACe,OAAA,YAAA,oBACE,wBACA,yDACf,CAEZ;IAAA,CAAA;AACU,IAAA,yBAAA,GAAA,KAAA,EAAA;AAAiD,IAAA,iBAAA,GAAA,QAAA;AAAM,IAAA,uBAAA;AACvD,IAAA,yBAAA,GAAA,MAAA;AAAM,IAAA,iBAAA,GAAA,YAAA;AAAU,IAAA,uBAAA,EAAO,EAChB;;;ADjBX,IAAO,oCAAP,MAAO,mCAAiC;EAkC5C,YACU,QACA,UACA,eACA,QAAqB;AAHrB,SAAA,SAAA;AACA,SAAA,WAAA;AACA,SAAA,gBAAA;AACA,SAAA,SAAA;AAlCV,SAAA,cAAc,IAAI,sBAChB,qBACA,KAAK,UACL,KAAK,eACL,KAAK,MAAM;AAGb,SAAA,gBAAgB,SAAS,KAAK,UAAU,KAAK,MAAM,EAAE;AAErD,SAAA,UAAU;MACR;QACE,OAAO;QACP,MAAM;QACN,OAAO,CAAC,eAAmC;AACzC,eAAK,iBAAiB,UAAU;QAClC;;MAEF;QACE,OAAO;QACP,MAAM;QACN,OAAO,CAAC,eAAmC;AACzC,eAAK,YAAY,mBACf,WAAW,KACX,uBACA,oDAAoD;QAExD;;;EASA;EAGJ,kBAAe;AACb,SAAK,YAAY,uBAAuB;EAC1C;EAEA,WAAQ;AACN,SAAK,YAAY,gBAAe;AAChC,QAAI,KAAK,WAAW;AAClB,WAAK,YAAY,cAAc;QAC7B,YAAY;UACV,SAAS,KAAK;;;IAGpB;AACA,UAAM,EAAE,QAAO,IAAK,6BAA6B,KAAK,UAAU;MAC9D,UAAU,CAAC,WAAU;AACnB,YAAI,KAAK,WAAW;AAClB,iBAAO,aAAa,iCACf,OAAO,aADQ;YAElB,SAAS,KAAK;;QAElB;AACA,aAAK,YAAY,SAAS,OAAO,UAAU;MAC7C;KACD;AAED,SAAK,UAAU;AAGf,SAAK,YAAY,WAAU;AAC3B,gBAAY,KAAK,aAAa;EAChC;EAEA,iBAAiB,YAA+B;AAC9C,SAAK,cAAc,CAAC,8BAA8B,GAAG,0BAA0B,UAAU;EAC3F;EAEA,cAAW;AACT,SAAK,YAAY,UAAS;EAC5B;;;uBAhFW,oCAAiC,4BAAA,MAAA,GAAA,4BAAA,eAAA,GAAA,4BAAA,aAAA,GAAA,4BAAA,aAAA,CAAA;IAAA;EAAA;;yEAAjC,oCAAiC,WAAA,CAAA,CAAA,gCAAA,CAAA,GAAA,cAAA,SAAA,+CAAA,IAAA,KAAA;AAAA,UAAA,KAAA,GAAA;AAAjC,QAAA,qBAAA,SAAA,SAAA,2DAAA,QAAA;AAAA,iBAAA,IAAA,gBAAA,MAAA;QAAuB,GAAA,OAAA,2BAAA;;;;AC9BpC,QAAA,yBAAA,GAAA,OAAA,CAAA,EAAkE,GAAA,OAAA,CAAA,EACzC,GAAA,OAAA,CAAA,EAIpB,GAAA,OAAA,CAAA,EACuD,GAAA,0BAAA,CAAA;AAgBlD,QAAA,qBAAA,UAAA,SAAA,oFAAA,QAAA;AAAA,iBAAU,IAAA,YAAA,SAAA,MAAA;QAA4B,CAAA;AAfxC,QAAA,uBAAA,EAgBE;AAGJ,QAAA,qBAAA,GAAA,0DAAA,GAAA,GAAA,OAAA,CAAA,EAA0C,GAAA,0DAAA,GAAA,GAAA,OAAA,CAAA;AAwB5C,QAAA,uBAAA;AAEA,QAAA,yBAAA,GAAA,mBAAA,CAAA;AAuCE,QAAA,qBAAA,iBAAA,SAAA,oFAAA,QAAA;AAAA,iBAAiB,IAAA,YAAA,cAAA,MAAA;QAAiC,CAAA,EAAC,cAAA,SAAA,iFAAA,QAAA;AAAA,iBACrC,IAAA,YAAA,WAAA,MAAA;QAA8B,CAAA,EAAC,cAAA,SAAA,iFAAA,QAAA;AAAA,iBAC/B,IAAA,YAAA,OAAA,OAAA,OAAA,OAAA,SAAA;QAAkD,CAAA,EAAC,mBAAA,SAAA,sFAAA,QAAA;AAAA,iBAC9C,IAAA,YAAA,gBAAA,MAAA;QAAmC,CAAA,EAAC,YAAA,SAAA,+EAAA,QAAA;AAAA,iBAC3C,IAAA,iBAAA,MAAA;QAAwB,CAAA;AA3CtC,QAAA,uBAAA,EA4CE,EACE;AAGR,QAAA,yBAAA,GAAA,mBAAA,CAAA;AASE,QAAA,qBAAA,UAAA,SAAA,+EAAA;AAAA,iBAAU,IAAA,YAAA,YAAA;QAAyB,CAAA;AATrC,QAAA,uBAAA;;;AAhGM,QAAA,oBAAA,CAAA;AAAA,QAAA,qBAAA,WAAA,0BAAA,IAAA,KAAA,IAAA,YAAA,WAAA,MAAA,CAAA;AAII,QAAA,oBAAA,CAAA;AAAA,QAAA,qBAAA,WAAA,0BAAA,IAAA,KAAA,0BAAA,IAAA,GAAA,GAAA,0BAAA,IAAA,GAAA,GAAA,0BAAA,IAAA,GAAA,CAAA,CAAA;AAkBJ,QAAA,oBAAA;AAAA,QAAA,wBAAA,GAAA,IAAA,YAAA,WAAA,WAAA,IAAA,IAAA,EAAA;AAQE,QAAA,oBAAA;AAAA,QAAA,wBAAA,GAAA,IAAA,YAAA,WAAA,SAAA,IAAA,IAAA,EAAA;AAmBF,QAAA,oBAAA;AAAA,QAAA,qBAAA,cAAA,IAAA,EAAmB,wBAAA,IAAA,YAAA,oBAAA,EACsC,WAAA,IAAA,YAAA,OAAA,EAC1B,cAAA,IAAA,YAAA,UAAA,EACM,SAAA,IAAA,YAAA,KAAA,EACV,UAAA,IAAA,YAAA,MAAA,EACE,SAAA,IAAA,YAAA,KAAA,EACF,gBAAA,IAAA,YAAA,YAAA,EACc,gBAAA,IAAA,YAAA,YAAA,EACA,gBAAA,IAAA,YAAA,YAAA,EACA,WAAA,IAAA,YAAA,OAAA,EACV,WAAA,0BAAA,IAAA,KAAA,0BAAA,IAAA,GAAA,GAAA,0BAAA,IAAA,GAAA,GAAA,0BAAA,IAAA,GAAA,GAAA,0BAAA,IAAA,GAAA,CAAA,CAAA,EA0B7B,WAAA,IAAA,OAAA;AAYN,QAAA,oBAAA;AAAA,QAAA,qBAAA,kBAAA,IAAA,YAAA,cAAA,EAA6C,aAAA,IAAA,YAAA,SAAA,EACV,SAAA,IAAA,YAAA,UAAA,EACH,WAAA,IAAA,YAAA,QAAA,EACA,gBAAA,IAAA,YAAA,iBAAA,EACc,cAAA,IAAA,YAAA,eAAA,EACJ,eAAA,IAAA,YAAA,gBAAA,EACE,gBAAA,IAAA,YAAA,kBAAA;;;MDvF1C;MACA;MACA;MACA;MACA;MACA;IAA6B,EAAA,CAAA;EAAA;;;6EAKpB,mCAAiC,EAAA,WAAA,oCAAA,CAAA;AAAA,GAAA;",
  "names": []
}
